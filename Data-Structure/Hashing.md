# Hashing

>Created: 2021년 10월 22일  
Created by: 백승화  
Tags: Data Structure  

우리가 일반적으로 배운 자료구조에서는 삭제 삽입 탐색에 있어서 가장 효율적인 시간복잡도가 O(logN) 이라는 것을 알고 있을 것이다

하지만 몇몇 경우에 O(1)에 가까운 시간복잡도로 해결해야하는 경우가 존재한다

그럴 경우에 우리는 Hashing이라는 방식을 통해서 O(1) 에 가까운 시간복잡도를 가지는 자료구조를 만들 수 있다

hashing 방식을 통해서 생성된 자료구조를 보통 dictionary로 부르고 java에서는 HashMap이라는 자료구조로 불려지고 있다

통일해서 dictionary로 이야기 하도록 하겠다

### Dictionary란

사전처럼 어떠한 키워드를 가지고 거기에 관련된 정보를 얻는다는 특징이 있기 때문에 dictionary 자료구조로 부른다

키워드에 의해서 정렬될 수 도 있지만 그렇지 않은 경우가 일반적이다

### Dictionary 구현 방법

데이터 저장을 위해서는 index를 가지고 O(1)으로 탐색이 가능한 array를 사용한다

이 array의 한칸을 bucket이라고 표현한다

하나의 버킷이 여러개의 데이터를 보관할 수 있도록 할 수 있는데 그 하나의 단위를 slot이라고 한다

우리는 키워드를 Hashing을 통하여서 나온 결과물을 dictionary의 key로 사용한다

key값이 너무 클 수도 있기 때문에 테이블의 크기를 M으로 설정을 하고

key = hash(k) % M 을 통해서 구하게 된다

## Hash Collison

### Hash Collison 발생 이유

테이블의 크기를 M으로 설정하고 hash(k) % M 을 통하여서 key를 생성하다 보니깐 1/M 만큼 확률로 key 값이 중복되는 현상이 발생하게 된다

### Hash Collison 해결 방법

- `open addressing` : 중복된 key값이 발생한다면 추가적인 key값에 연산을 하여서 비어있는 다른 공간에 데이터를 저장할 수 있도록 해주는 방식이다

  이 방식을 사용할 경우 테이블의 크기가 소수가 되어야 한다

  소수여야 하는 이유 : 탐색을 할때 모든 bucket을 탐색하기 위해서

- `chaining` : 중복된 key 값이 발생하게 된다면 같은 key 값에 데이터를 linked list 형식으로 저장하는 방식이다

### Open Addressing

- 선형 조사법

  선형 조사법은 충돌이 발생한다면 key값에 h(k)+1 % M, +2, +3.. 이런식으로 빈칸을 발견할 때까지 한칸식 움직이면서 탐색하는 방식이다

    - 장점
        - 구현하기 단순하다
    - 단점
        - 충돌이 발생하기 시작한 부분을 중심으로 데이터가 모이게 되는 군집화 현상이 발생하게 된다
- 이차 조사법

  이차 조사법은 충돌이 발생한다면 key 값에 (h(k) + inc*inc) % mod ... 형식으로 빈칸을 발견할 때까지 inc++을 하면서 탐색을 진행한다

    - 장점
        - 선형 조사법에 비해서 군집화가 완화 시킬 수 있다
    - 단점
        - 이차 조사법에서도 그에따른 군집화 현상이 발생한다
- 이중 해시법

  이중 해시법은 충돌이 발생한다면 key 값에 원래의 hashing하는 함수와 다른 함수를 사용해서 key값을 계산한다

  step = C - (k mod C) → C값은 M보다 작은 소수

  h(k), h(k) + step, h(k) + 2*step... 이런식으로 진행된다

    - 장점
        - 선형, 이차 조사법에서 발생했던 군집화 현상을 해결 할 수 있다

### Chaining

chaining 방식은 선형, 이차 조사법, 이중 해시법이랑은 다르게 비어있는 공간이 있는지 찾으러 다닐 필요없이 해시충돌이 발생하게 된다면 해당 버킷에 linked list를 생성하여서 데이터를 저장하는 방식을 가지는 것이다

**java에서 해시 충돌이 발생했을 경우 사용하는 방식이다**
