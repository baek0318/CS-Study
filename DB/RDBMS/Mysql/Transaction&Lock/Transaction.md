# 트랜잭션

## 트랜잭션이란..
두 개 이상의 쿼리든지 상관없이 논리적인 작업 셋 자체가  
성공한 경우에는 모두 성공하든지 실패하는 경우에는 모두 실패하든지  
만들어주는 것을 트랜잭션이라고 한다  

## 주의 사항
- 메일 전송이나 FTP 파일전송 또는 네트워크를 통해 원격 서버와 통신하는 작업인 경우 트랜잭션에서 따로 빼는 것이 좋다
- 트랜잭션의 범위는 최소한으로 하는 것이 좋다 

## 트랜잭션 격리 수준

- 3가지 부정합 문제  
  |격리수준 \ 문제점|Dirty Read|Non-Repeatable Read|Phantom Read|
  |---|---|---|---|
  |Read Uncommitted|발생|발생|발생|
  |Read Committed|없음|발생|발생|
  |Repeatable Read|없음|없음|발생(InnoDB 는 없음)|
  |Serializable|없음|없음|없음|

### Read Uncommitted
커밋되지 않은 상태의 데이터도 읽을 수 있는 단계를 이야기한다

### Read Committed
트랜잭션이 완전히 커밋된 데이터만 읽을 수가 있는 단계를 이야기한다

### Repeatable Read
InnoDB에서 기본을 사용되는 격리수준이다  
언두 영역에서 데이터를 가져오는 것이 Read Commited와 비슷하다  
하지만 언두 영역에 백업된 데이터 버전중에서 어떤 버전을 고르냐의 차이가 존재한다  
즉 자신의 트랜잭션 고유번호 보다 낮은 트랜잭션 고유번호를 가진 언두 버전을 선택한다  

### Serializable
가장 엄격한 격리수준으로 select에서도 공유잠금이 발생하여서 동시성 처리가 상당히 떨어지는 격리수준이다  
