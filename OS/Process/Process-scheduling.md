# Process Scheduling

## Scheduling Queues
스케줄링 큐의 종류 2가지
1. Ready Queue</br>
  -> 프로세스들이 처음 초기화되서 시스템에 들어오게 되면 `ready queue`에 놓여진다</br>
  -> OS에 <span style="color:orange">1개</span> 존재한다
2. Wait Queue</br>
  -> 특정 이벤트나 I/O가 발생했을 때는 `wait queue`로 가게된다</br>
  -> I/O 장치가 여러개 존재하기 때문에 <span style="color:orange">1개 이상</span> 존재한다

위의 `Queue`들은 PCB들을 `Linked List`로 만들어서 구현한다

## Context Switch (문맥 교환)
프로세스의 context란 PCB를 가리키는 말이라고 생각하면 된다</br>
### Context Switch가 하는 일
CPU에서 다른 프로세스가 불렸을 때 `Context Switch`를 통해 **현재의 시점을 저장**하고 다른 프로세스를 부른다</br>
다른 프로세스가 끝났을 때 `Context Switch`를 통해 저장되었던 것을 PCB로 부터 불러와서 **정지시점**부터 다시 실행한다</br>

> 위와 같이 **Context Switch**와 **Scheduling Queue**가 존재하기 때문에</br>
> OS에서 **time sharing**과 **multiprogramming**이 가능한 것이다

`time sharing` : CPU가 비는 시간 없이 자신의 비는 곳을 쪼개서 다른 프로그램들을 실행한다</br>
`multiprogramming` : 프로세스에서 CPU를 사용률을 최대로 이끌어내기 위한 방법이다

# CPU 스케줄링

>Created: 2021년 10월 18일 오후 12:16  
>Tags: 면접     
>사람: 익명

### 고수준(장기) 스케줄링

시스템 내의 전체 작업 수를 조절하는 것을 말한다

고수준 스케줄링 단계에서는 어떤 작업을 시스템이 받아들일지 또는 거부할지 결정한다

### 중간 수준(중기) 스케줄링

전체 시스템에서 실행되고 있는 프로세스가 너무 많다면 몇몇 프로세스를 보류상태로 만들어

과부화가 되지 않도록 한다

### 저수준(단기) 스케줄링

저수준 스케줄링은 어떤 프로세스에 CPU를 할당할지 어떤 프로세스를 대기 상태로 보낼지 등을 결정하는 일이다

### 스케줄링의 목적

- 공평성
- 효율성
- 확장성
- 반응 시간 보장
- 무한 연기 방지

### FCFS 스케줄링 (비선점형)

준비 큐에 도착한 순서대로 CPU 할당을 해주는 방식으로 선입선출 스케줄링 이라고도 한다

큐가 하나만 존재하기 때문에 모든 프로세스의 우선순위가 동일하다

- 장점
  - 단순하고 공평하다
- 단점
  - convoy effect : 처리시간이 긴 프로세스가 CPU를 차지한다면 다른 것은 하염없이 기다려야하는 것을 이야기한다

### SJF 스케줄링 (비선점형)

준비 큐에 대기하고 있는 프로세스 중에 실행시간이 가장 짧은 프로세스에게 CPU 점유를 먼저 할 수 있도록 해주는 것이다

- **장점**
  - FCFS에서 문제점으로 제기되었던 convoy effect를 완화 시킬 수 있다
- **단점**
  - 운영체제가 프로세스의 종료시간을 정확히 예측하기가 어렵다
  - 계속 특정 프로세스보다 짧은 프로세스만 들어올 경우에 starvation이 발생 할 수 도 있다
  - **해결방법**
    - 프로세스가 자신의 작업시간을 운영체제에 알려주면 된다 (하지만 쉽지 않음..)
    - aging을 도입함으로써 starvation을 해결할 수 있다 (기준 세우기가 쉽지 않음..)

### 라운드 로빈 스케줄링 (선점형)

프로세스가 할당받은 시간을 넘어서게 되면은 자동으로 준비 큐의 가장 뒤로 들어가게 된다

- 장점
  - 모든 프로세스에게 동일한 시간을 줌으로써 convoy effect를 줄일 수 있다
- 단점
  - 타임 슬라이스의 크기를 정하기가 까다롭다
    - 타임 슬라이스가 클 경우 : FCFS 처럼 보인다
    - 타임 슬라이스가 작은 경우 : 너무 잦은 문맥 교환으로 인한 비용이 너무 커진다

### SRTF 스케줄링 (선점형)

SJF 스케줄링의 선점형 버전으로 볼 수 있다

여기서는 라운드 로빈 방식을 기본적으로 선택하지만 다음 프로세스를 선택할 때 실행시간이 더 적게 남은 프로세스를 우선적으로 처리한다

- 장점
  - convoy effect 완화
- 단점
  - 프로세스의 남은 시간을 주기적으로 계산해야한다
  - starvation 발생
  - 프로세스의 종료시간을 예측하기 어렵다

### 우선순위 스케줄링 (비선점형, 선점형)

프로세스의 특정한 기준을 가지고 우선순위를 매겨서 우선순위가 높은 순으로 CPU를 사용하게 한다

보통은 우선순위의 기준을 프로세스의 중요도에 따라서 결정된다

- 고정 우선순위 알고리즘

  한번 우선순위를 반영 받으면 종료될때까지 우선순위가 유지된다

- 변동 우선순위 알고리즘

  일정시간마다 우선순위가 변경한다

- 단점
  - starvation 현상이 일어난다
  - 우선순위를 매번 변경해주면 그만큼 비용이 더 든다